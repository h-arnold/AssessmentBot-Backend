# Release v0.1.10 (draft)

Release highlights

- Patch release: Bumped package version to **v0.1.10**. âœ…
- Test & E2E improvements: refactor of application entrypoints and test setup, split live vs mocked E2E configuration, and new integration tests to catch startup and logging issues. ðŸ”§
- LLM improvements: improved Gemini structured error logging. ðŸ¤–
- Codex delegation: added tooling, agent prompts and documentation to support Codex delegation workflows. ðŸ“š

## Details

### Testing & E2E improvements (major) ðŸ”§

- **Refactor entrypoints & bootstrap** â€” Split and refactored application entry points for better testability and clearer bootstrap semantics: added `src/bootstrap.ts`, `src/testing-main.ts` and corresponding tests (`src/bootstrap.spec.ts`, `src/testing-main.spec.ts`). This change makes startup behaviour easier to test and reason about.
- **Harden mocked/live E2E split** â€” Added separate configs and setup for live and mocked E2E runs: `jest-e2e.live.config.cjs`, `jest-e2e.mocked.config.cjs`, `test/jest.e2e.live.setup.ts`, `test/jest.e2e.mocked.setup.ts`. This reduces test flakiness and improves CI reliability (see PR #140).
- **New tests & utilities** â€” Added integration tests and helper utilities to validate startup and log-watching behaviour: `test/start-app.e2e-spec.ts`, `test/log-watcher.unit-spec.ts`, `test/utils/llm-http-shim.cjs`, and `test/utils/app-lifecycle.ts`. Improvements include better handling of malformed log lines and defensive `waitForLog` behaviour.

### LLM & logging improvements ðŸ¤–

- **Gemini structured error logging** â€” Improved structured error logging in `src/llm/gemini.service.ts` to make LLM errors easier to diagnose (PR #137).
- **App startup and log processing fixes** â€” Improved error handling and logging in `src/main.ts` and test utilities to avoid silent or confusing failures during startup.

### Codex delegation tooling & docs ðŸ“š

- **Codex delegation** â€” Added Codex delegation CLI/tooling and documentation: `scripts/codex-delegate.ts`, `scripts/codex-sdk.d.ts`, `scripts/agent-prompts/*`, `docs/development/codex-delegation.md`, and related updates to `AGENTS.md` and `CODEX_DELEGATION_PLAN.md` (PR #139). This introduces a documented, repeatable flow for delegating small tasks to focused agents.

### Utilities & small features ðŸ”§

- **Log redaction util** â€” Added `LogRedactor` to help sanitise sensitive headers before logging (`src/common/utils/log-redactor.util.ts` + spec).
- **Package updates** â€” Updated `hono` to v4.11.7 and applied associated maintenance adjustments.
- **Misc tests & coverage** â€” Added/improved tests for `status` module and other components (`src/status/*`, `src/v1/assessor/*` test updates).

### Files changed (not exhaustive)

- Added: `src/bootstrap.ts`, `src/testing-main.ts`, `test/start-app.e2e-spec.ts`, `test/log-watcher.unit-spec.ts`, `jest-e2e.live.config.cjs`, `jest-e2e.mocked.config.cjs`, `scripts/codex-delegate.ts`
- Modified: `src/main.ts`, `src/llm/gemini.service.ts`, `src/v1/assessor/assessor.service.ts`, `package.json`
- Added tests & docs: `docs/development/codex-delegation.md`, `scripts/agent-prompts/*`, `AGENTS.md`

## Upgrade notes

- No breaking API changes detected.
- CI / E2E: If you run E2E tests locally, use the new split configs for mocked vs live runs (see `jest-e2e.*.config.cjs` and `test/jest.e2e.*.setup.ts`).
- Operators & maintainers: review the new Codex delegation docs if you plan to use delegation tooling; consider the new log redaction utility for sensitive request logging.
